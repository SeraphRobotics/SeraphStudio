 <toolScript name="Continuous Extrusion Plastic" description="Prints using a thermoplastic deposition tool" printer="Fab@Home Model 2">

  <settings>
    <!-- Settings that are not per-tool -->
    <!--<sliceHeight text="Slice Height" units="mm">0.42</sliceHeight>-->
  </settings>

   <!-- Expose settings for the first tool -->
   <tool name="Blue-Tip, 10cc (Right)" material="Plastic" scriptVariable="blue" isSupportMaterial="false">
     <settings>
       <sliceHeight text="Slice Height" units="mm">0.40</sliceHeight>
       <pathSpeed text="Path Speed" units="mm/s">10</pathSpeed>
       <pathWidth text="Path Width" units="mm">.5</pathWidth>
       <depositionRate text="DepositionRate" units="mm/mm">0.0009</depositionRate>
       <pushout text="Pushout" units="seconds">0.2</pushout>
       <suckback text="Suckback" units="seconds">0.2</suckback>
       <suckbackDelay text="Suckback Delay" units="seconds">0</suckbackDelay>
       <clearance text="Clearance" units="mm">2</clearance>
       <pausePaths text="Pause after # Paths" units=" # of paths">300</pausePaths>
       <pitch text="Pitch" units="?">0.000397</pitch>
     </settings>
   </tool>

  <printScript>
  <![CDATA[

progress.setSteps(blue.meshes.length + 3);

slicer.setSliceHeight(blue.sliceHeight);
pather.set("PathWidth", blue.pathWidth);
for (var i = 0; i < blue.meshes.length; ++i) {
  slicer.doSlicing(blue.meshes[i]);
  progress.step();
  pather.doPathing(blue.meshes[i]);
  progress.step();
}

var fabWriter = fabFile.fabAtHomeModel2Writer();
var blueMaterialCalibration = {
  pathSpeed: blue.pathSpeed,
  depositionRate: blue.depositionRate,
  pathWidth: blue.pathWidth,
  depositionRate: blue.depositionRate,
  pushout: blue.pushout,
  suckback: blue.suckback,
  suckbackDelay: blue.suckbackDelay,
  clearance: blue.clearance,
  pausePaths: blue.pausePaths,
  pitch: blue.pitch
};

fabWriter.addMeshes("bluetip-silicone", blueMaterialCalibration, blue.meshes);
progress.step();

fabWriter.sortBottomUp();
fabWriter.print();
progress.finish();

  ]]>
  </printScript>
</toolScript>
